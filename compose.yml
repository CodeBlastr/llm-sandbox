services:
  llm-sandbox:
    build: .
    container_name: llm-sandbox
    volumes:
      - ./:/workspace
      - ~/.ssh:/home/appuser/.ssh:ro
      - type: tmpfs
        target: /home/appuser
        tmpfs:
          mode: 1777
    working_dir: /workspace
    tty: true
    stdin_open: true
    user: "${UID:-1000}:${GID:-1000}"
    read_only: true
    tmpfs:
      - /tmp
      - /var/tmp
    cap_drop:
      - ALL
    environment:
      - WORKSPACE_ROOT=/workspace
      - NPM_CONFIG_CACHE=/tmp/.npm-cache
